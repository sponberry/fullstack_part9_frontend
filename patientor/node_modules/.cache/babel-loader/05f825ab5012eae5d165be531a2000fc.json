{"ast":null,"code":"export const setPatientList = patientListFromApi => {\n  return {\n    type: \"SET_PATIENT_LIST\",\n    payload: patientListFromApi\n  };\n};\nexport const setDiagnoses = diagnosesFromApi => {\n  return {\n    type: \"SET_DIAGNOSES\",\n    payload: diagnosesFromApi\n  };\n};\nexport const createPatient = singlePatientData => {\n  return {\n    type: \"SET_SINGLE_PATIENT\",\n    payload: singlePatientData\n  };\n};\nexport const setSinglePatient = newPatient => {\n  return {\n    type: \"ADD_PATIENT\",\n    payload: newPatient\n  };\n};\nexport const reducer = (state, action) => {\n  switch (action.type) {\n    case \"SET_PATIENT_LIST\":\n      return { ...state,\n        patients: { ...action.payload.reduce((memo, patient) => ({ ...memo,\n            [patient.id]: patient\n          }), {}),\n          ...state.patients\n        }\n      };\n\n    case \"SET_DIAGNOSES\":\n      return { ...state,\n        diagnoses: { ...action.payload.reduce((memo, diagnosis) => ({ ...memo,\n            [diagnosis.code]: diagnosis\n          }), {}),\n          ...state.patients\n        }\n      };\n\n    case \"SET_SINGLE_PATIENT\":\n      if (state.patients[action.payload.id] && state.patients[action.payload.id].ssn) {\n        console.log('patient already exists');\n        return state;\n      }\n\n      return { ...state,\n        patients: { ...state.patients,\n          [action.payload.id]: action.payload\n        }\n      };\n\n    case \"ADD_PATIENT\":\n      return { ...state,\n        patients: { ...state.patients,\n          [action.payload.id]: action.payload\n        }\n      };\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"names":["setPatientList","patientListFromApi","type","payload","setDiagnoses","diagnosesFromApi","createPatient","singlePatientData","setSinglePatient","newPatient","reducer","state","action","patients","reduce","memo","patient","id","diagnoses","diagnosis","code","ssn","console","log"],"sources":["/Users/abigailnottingham/HTML Projects/fullstack_open/part9_c_patientor_frontend/patientor/src/state/reducer.ts"],"sourcesContent":["import { State } from \"./state\";\nimport { Patient, Diagnosis } from \"../types\";\n\nexport type Action =\n  | {\n      type: \"SET_PATIENT_LIST\";\n      payload: Patient[];\n    }\n  | {\n      type: \"SET_DIAGNOSES\";\n      payload: Diagnosis[];\n    }\n  | {\n      type: \"SET_SINGLE_PATIENT\";\n      payload: Patient;\n    }\n  | {\n      type: \"ADD_PATIENT\";\n      payload: Patient;\n    };\n\nexport const setPatientList = (patientListFromApi: Patient[]): Action => {\n  return { type: \"SET_PATIENT_LIST\", payload: patientListFromApi };\n};\n\nexport const setDiagnoses = (diagnosesFromApi: Diagnosis[]): Action => {\n  return { type: \"SET_DIAGNOSES\", payload: diagnosesFromApi };\n};\n\nexport const createPatient = (singlePatientData: Patient): Action => {\n  return { type: \"SET_SINGLE_PATIENT\", payload: singlePatientData };\n};\n\nexport const setSinglePatient = (newPatient: Patient): Action => {\n  return { type: \"ADD_PATIENT\", payload: newPatient };\n};\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"SET_PATIENT_LIST\":\n      return {\n        ...state,\n        patients: {\n          ...action.payload.reduce(\n            (memo, patient) => ({ ...memo, [patient.id]: patient }),\n            {}\n          ),\n          ...state.patients\n        }\n      };\n    case \"SET_DIAGNOSES\":\n      return {\n        ...state,\n        diagnoses: {\n          ...action.payload.reduce(\n            (memo, diagnosis) => ({ ...memo, [diagnosis.code]: diagnosis }),\n            {}\n          ),\n          ...state.patients\n        }\n      };\n    case \"SET_SINGLE_PATIENT\":\n      if (state.patients[action.payload.id] && state.patients[action.payload.id].ssn) {\n        console.log('patient already exists');\n        return state;\n      }\n      return {\n        ...state,\n        patients: {\n          ...state.patients,\n          [action.payload.id]: action.payload\n        }\n      };\n    case \"ADD_PATIENT\":\n      return {\n        ...state,\n        patients: {\n          ...state.patients,\n          [action.payload.id]: action.payload\n        }\n      };\n    default:\n      return state;\n  }\n};\n"],"mappings":"AAqBA,OAAO,MAAMA,cAAc,GAAIC,kBAAD,IAA2C;EACvE,OAAO;IAAEC,IAAI,EAAE,kBAAR;IAA4BC,OAAO,EAAEF;EAArC,CAAP;AACD,CAFM;AAIP,OAAO,MAAMG,YAAY,GAAIC,gBAAD,IAA2C;EACrE,OAAO;IAAEH,IAAI,EAAE,eAAR;IAAyBC,OAAO,EAAEE;EAAlC,CAAP;AACD,CAFM;AAIP,OAAO,MAAMC,aAAa,GAAIC,iBAAD,IAAwC;EACnE,OAAO;IAAEL,IAAI,EAAE,oBAAR;IAA8BC,OAAO,EAAEI;EAAvC,CAAP;AACD,CAFM;AAIP,OAAO,MAAMC,gBAAgB,GAAIC,UAAD,IAAiC;EAC/D,OAAO;IAAEP,IAAI,EAAE,aAAR;IAAuBC,OAAO,EAAEM;EAAhC,CAAP;AACD,CAFM;AAIP,OAAO,MAAMC,OAAO,GAAG,CAACC,KAAD,EAAeC,MAAf,KAAyC;EAC9D,QAAQA,MAAM,CAACV,IAAf;IACE,KAAK,kBAAL;MACE,OAAO,EACL,GAAGS,KADE;QAELE,QAAQ,EAAE,EACR,GAAGD,MAAM,CAACT,OAAP,CAAeW,MAAf,CACD,CAACC,IAAD,EAAOC,OAAP,MAAoB,EAAE,GAAGD,IAAL;YAAW,CAACC,OAAO,CAACC,EAAT,GAAcD;UAAzB,CAApB,CADC,EAED,EAFC,CADK;UAKR,GAAGL,KAAK,CAACE;QALD;MAFL,CAAP;;IAUF,KAAK,eAAL;MACE,OAAO,EACL,GAAGF,KADE;QAELO,SAAS,EAAE,EACT,GAAGN,MAAM,CAACT,OAAP,CAAeW,MAAf,CACD,CAACC,IAAD,EAAOI,SAAP,MAAsB,EAAE,GAAGJ,IAAL;YAAW,CAACI,SAAS,CAACC,IAAX,GAAkBD;UAA7B,CAAtB,CADC,EAED,EAFC,CADM;UAKT,GAAGR,KAAK,CAACE;QALA;MAFN,CAAP;;IAUF,KAAK,oBAAL;MACE,IAAIF,KAAK,CAACE,QAAN,CAAeD,MAAM,CAACT,OAAP,CAAec,EAA9B,KAAqCN,KAAK,CAACE,QAAN,CAAeD,MAAM,CAACT,OAAP,CAAec,EAA9B,EAAkCI,GAA3E,EAAgF;QAC9EC,OAAO,CAACC,GAAR,CAAY,wBAAZ;QACA,OAAOZ,KAAP;MACD;;MACD,OAAO,EACL,GAAGA,KADE;QAELE,QAAQ,EAAE,EACR,GAAGF,KAAK,CAACE,QADD;UAER,CAACD,MAAM,CAACT,OAAP,CAAec,EAAhB,GAAqBL,MAAM,CAACT;QAFpB;MAFL,CAAP;;IAOF,KAAK,aAAL;MACE,OAAO,EACL,GAAGQ,KADE;QAELE,QAAQ,EAAE,EACR,GAAGF,KAAK,CAACE,QADD;UAER,CAACD,MAAM,CAACT,OAAP,CAAec,EAAhB,GAAqBL,MAAM,CAACT;QAFpB;MAFL,CAAP;;IAOF;MACE,OAAOQ,KAAP;EA5CJ;AA8CD,CA/CM"},"metadata":{},"sourceType":"module"}